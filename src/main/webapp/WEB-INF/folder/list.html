<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>添加目录</title>
<script src="../static_bootstrap/js/jquery-1.9.1.min.js"></script>
<script src="../static_bootstrap/js/jquery-migrate-1.0.0.min.js"></script>
<script src="../static_bootstrap/js/bootstrap-treeview.js"></script>
<link href="../static_bootstrap/css/bootstrap-treeview.css" type=text/css rel=stylesheet>
<link href="../static_bootstrap/css/bootstrap-3.3.5.min.css" rel="stylesheet">
<link href="../static_bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
<link id="base-style-responsive" href="../static_bootstrap/css/style-responsive.css" rel="stylesheet">
</head>
<body>

<div id="base" class="">

<table width="60%"  class="table table-bordered table-striped">
<tr>
    <th  width="10%" >文件路径</th>    
 	<td width="90%" >
 	  <input id="folderPath" type="text" value="" size="50">
 	  <input id="folderId" type="hidden" value="" >
 	</td> 	
</tr>
<tr>
    <th width="10%" >已添加</th>    
 	<td width="80%" >
 	 <div>    
	        <select id="folderPathSelect" style="width:100%;" size="10" onchange="setSeparator(this.options[this.options.selectedIndex].value,this.options[this.options.selectedIndex].text)">    
	       	  <#list list as folder>
	         	 <option value="${folder.folderId!}">${folder.folderPath!}</option>
	          </#list>
	        </select>
	      </div>
 	</td> 	
</tr>
<tr>
    <th width="10%" >操作</th>    
 	<td width="90%" >
 	 <input id="addButton" type="button" class="btn btn-primary" value="添加">&nbsp;&nbsp;
     <input id="delButton" type="button" class="btn btn-danger" value="删除">
 	</td> 	
</tr>
</table>
 </div>
</body>

<script>
//添加
$("#addButton").bind("click",function(){
	var addPath = $("#folderPath").val();
	if(addPath==""){
		alert("请填写路径");
		return;
	}
	
	 $.ajax(  
             {  
                 url:'add.htm', 
                 type:"post",  
                 async:true,  
                 data:{'folderPath':addPath},  
                 dataType:"json",  
                 timeout:"100000",  
                 error:function(){alert("服务出错");},  
                 success:function(data)  
                 { 
                	 if(data.code==200){
                		 jQuery("#folderPathSelect").append("<option value='"+addPath+"'>"+addPath+"</option>");
                	 }else{
                		 alert(data.msg);
                	 }
           			
                 }  
             }  
         );  
	 
	});

//删除
$("#delButton").bind("click",function(){
	var id = $("#folderId").val();
	if(id==""){
		alert("请在已添加路径中双击鼠标，选择需要删除的路径");
		return;
	}
	
	 $.ajax(  
             {  
                 url:'delete.htm', 
                 type:"post",  
                 async:true,  
                 data:{'id':id},  
                 dataType:"json",  
                 timeout:"100000",  
                 error:function(){alert("服务出错");},  
                 success:function(data)  
                 {  
                	 if(data.code==200){
                		 jQuery("#folderPathSelect option[value='"+id+"']").remove();
                	 }else{
                		 alert(data.msg);
                	 }
                	 
                 }  
             }  
         );  
	 
	});  
	
function setSeparator(id,text){	
	$("#folderId").val(id);	
	$("#folderPath").val(text);	
}
</script>
</html>