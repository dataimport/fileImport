<!DOCTYPE HTML PUBliC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>入库任务监控</TITLE>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<script src="../static_bootstrap/js/jquery-1.9.1.min.js"></script>
<script src="../static_bootstrap/js/jquery-migrate-1.0.0.min.js"></script>
<link href="../static_bootstrap/css/bootstrap-3.3.5.min.css" rel="stylesheet">
<link href="../static_bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
<link id="base-style-responsive" href="../static_bootstrap/css/style-responsive.css" rel="stylesheet">
<link href="../static_bootstrap/css/my.css" type=text/css rel=stylesheet>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&subset=latin,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>
</HEAD>
<BODY>
	<div class="container" style="width: 100%;">
	    
	    <#if status??&&status==888>
		<div class="row">
			<h4 style="font-weight: bold;margin-top: 0px;">当前任务总数:&nbsp;&nbsp;${list?size}</h4>
			<div class="progress">
				<div class="label-success label-progress" style="width: 30%;">执行中4/30%</div>
				<div class="label-info label-progress" style="width: 40%;">等待5/40%</div>
				<div class="label-warning label-progress" style="width: 15%;">暂停2/15%</div>
				<div class="label-default label-progress" style="width: 15%;">未启动2/15%</div>
			</div>
		</div>
		</#if>
		<div class="row">
				<table class="table table-bordered">
							  <thead>
								  <tr class="active">
									  <th>序号</th>
									  <th>任务名称</th>
									  <th>创建者</th>
									  <th>状态</th>
									  <th>计划/启动时间</th>
									  <th>已执行时长</th>
									  <th>剩余时长</th>
									  <th>进度/数据条目</th>
									  <th>数据总条目</th>
									  <th>操作</th>
								  </tr>
							  </thead>   
							  <tbody>
							  
							  <#if (list?size>0)>
							  <#list list as task>
								<tr>
									<td>${task_index+1!}</td>
									<td class="center">${task.tableName!}-${task.origin!}</td>
									<td class="center">${task.createUser!}</td>  
									<td class="center">
									     <#if task.taskStatus==0>
										    <span class="label label-default">未启动</span>
										 <#elseif task.taskStatus==1>
									    	<span class="label label-success">执行中</span>									    
									    <#elseif task.taskStatus==-2>
									        <span class="label label-danger">异常</span>
									    <#elseif task.taskStatus==2>
									        <span class="label label-info">已完成</span>
									    </#if>
									</td>  
									<td class="center">${task.runTime!}</td>
									<td class="center">${task.startDate!}</td>
									<td class="center">${task.timeUse!}</td> 
									<td class="center">
									<#if task.totalCount??&&task.totalCount!=0>
	   
									   <#if task.firstLineIgnore=true>
									      <#assign percent = (((task.runNum+1)!/task.totalCount!)*100)?string("0.##")>
									   <#else>
									      <#assign percent = ((task.runNum!/task.totalCount!)*100)?string("0.##")>
									   </#if>
									   <#if percent=="100">
									    <font color="#0D3EEF">${percent!}%</font> 
									   <#else>
									     <font color="#EF0F1A">${percent!}%</font> 
									   </#if>		
									   <#else>
									   		计算中
									   </#if>
									   /${task.runNum!}</td>
									<td class="center">${task.totalCount!}</td> 
									<td class="center">
										<button type="button" class="btn btn-success btn-xs">启动</button>
										<button type="button" class="btn btn-danger btn-xs">删除</button>
										<button type="button" class="btn btn-primary btn-xs">变更启动时间</button>
								</td>                                     
								</tr>
								</#list>
								<#else>
								  <tr>
									<td colspan="10">
									            当前队列中，没有执行的任务
									</td>
								  </tr>
								</#if>
							  </tbody>
						 </table>  
						 <nav style="margin: 0 auto;text-align: center; width: 100%;">
						  <ul class="pagination">
						    <li>
						      <a href="#" aria-label="Previous">
						        <span aria-hidden="true">&laquo;</span>
						      </a>
						    </li>
						    <li><a href="#">1</a></li>
						    <li><a href="#">2</a></li>
						    <li><a href="#">3</a></li>
						    <li><a href="#">4</a></li>
						    <li><a href="#">5</a></li>
						    <li>
						      <a href="#" aria-label="Next">
						        <span aria-hidden="true">&raquo;</span>
						      </a>
						    </li>
						  </ul>
						  <button type="button" class="btn btn-primary" style="float:left;margin-top: 15px;">查看入库任务日志</button>
						</nav>
						

			
		</div>
	</div>

</BODY>
<script src="../static_bootstrap/js/ie10-viewport-bug-workaround.js"></script>

<script type="text/javascript">
        $(function () {
            var defaultData = [
            {
                text: 'Parent 1',
                href: '#parent1',
                tags: ['4'],
                nodes: [
                {
                    text: 'Child 1',
                    href: '#child1',
                    tags: ['2'],
                    nodes: [
                    {
                        text: 'Grandchild 1',
                        href: '#grandchild1',
                        tags: ['0']
                    },
                    {
                        text: 'Grandchild 2',
                        href: '#grandchild2',
                        tags: ['0']
                    }
                  ]
                },
                {
                    text: 'Child 2',
                    href: '#child2',
                    tags: ['0']
                }
              ]
            },
            {
                text: 'Parent 2',
                href: '#parent2',
                tags: ['0']
            },
            {
                text: 'Parent 3',
                href: '#parent3',
                tags: ['0']
            },
            {
                text: 'Parent 4',
                href: '#parent4',
                tags: ['0']
            },
            {
                text: 'Parent 5',
                href: '#parent5',
                tags: ['0']
            }
          ];

            $('#treeview1').treeview({
                color: "#428bca",
                showBorder: true,
                data: defaultData
            });

           
        });
    </script>
	   
		
</HTML>