<!DOCTYPE HTML PUBliC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>Mongo数据维护</TITLE>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<script src="../static_bootstrap/js/jquery-1.9.1.min.js"></script>
<script src="../static_bootstrap/js/jquery-migrate-1.0.0.min.js"></script>
<script src="../static_bootstrap/js/bootstrap-treeview.js"></script>
<link href="../static_bootstrap/css/bootstrap-treeview.css" type=text/css rel=stylesheet>
<link href="../static_bootstrap/css/bootstrap-3.3.5.min.css" rel="stylesheet">
<link href="../static_bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
<link id="base-style-responsive" href="../static_bootstrap/css/style-responsive.css" rel="stylesheet">
</HEAD>
<BODY>
<div class="container" style="width: 100%;">
<div class="row">
			<div class="col-md-2">
				<div id="treeview1" class="treeview">
			  <ul class="list-group">
			  
			    <#list catalogList as ca> 
			    <li onclick="findByCatalog('${ca!}')" class="list-group-item node-treeview1" data-nodeid="${ca_index}" style="">
			      <span class="expand-collapse click-collapse glyphicon glyphicon-minus">
			      </span>			      
			      ${ca!}
			    </li>
			   
			    </#list>
			  </ul>
			</div>
			</div>
			<div div class="col-md-10">
				<form class="form-inline"> 
				  <div class="form-group">
				    <div class="form-group">
				      <select  class="form-control" style="margin:5px 5px 5px 5px;">
				        <option>名称</option>
				        <option>目录</option>
				        <option>文件名</option>
				        <option>标签</option>
				        <option>目录</option>
				      </select>
				    </div>
				    <input class="form-control" placeholder="请输入查找内容" style="width: 300px;">
				  </div>
				  <button type="submit" class="btn btn-primary">查找</button>
				  <button type="submit" class="btn btn-success">显示全部</button>
				  <div class="checkbox">
				    <label>
				      <input type="checkbox" style="margin-left: 10px;">仅显示停用数据表
				    </label>
				  </div>
				  
				</form>
				<table class="table table-bordered" style="margin-top: 10px;margin-left: 5px;">
							  <thead>
								  <tr class="active">
									  <th>表名/状态</th>
									  <th>记录数</th>
									  <th>来源</th>
									  <th>创建时间/最后更新时间</th>
									  <th>数据日期</th>
									  <th>标签组</th>
									  <th>操作</th>
								  </tr>
							  </thead>   
							  <tbody>
								<#list taskList as task>
									<tr>
									   <td>
										 ${task.tableName!}
										</td>
										 <td>
										 ${task.totalCount!}
										</td>
										<td>
										 ${task.origin!}
										</td>
									   <td>
										 ${task.createTime!}/${task.startDate!}
										</td>
										<td>
									    ${task.dataTime!}
										</td>
										<td>
										  ${task.tags!}
										</td>
										<td>
										<a href="javascript:showValues('${task.uid!}','${task.tableNameAlias!}')">浏览数据</a>&nbsp;&nbsp;
										<a href="javascript:showTableInfo('${task.uid!}')">查看表信息</a>&nbsp;&nbsp;
										</td>
									</tr> 			
								</#list>
							  </tbody>
						 </table>  
						 <#if (page.totalPage>1)> 
<nav style="margin: 0 auto;text-align: center; width: 100%;">
  <ul class="pagination">
   <li>
      <a href="list.htm?status=${status!}&pageNo=1&pageSize=${page.pageSize}" aria-label="第一页">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
  <#list 1..page.totalPage as pageCur>
	<#if pageCur!=0>
	  <#if pageCur==page.pageNo>
	  	<li class="active">
	  <#else>
	  	<li>
	  </#if>
	  <a href="list.htm?status=${status!}&pageNo=${pageCur}&pageSize=${page.pageSize}">${pageCur} <span class="sr-only">(current)</span></a>
	</#if>
  </#list>
   <li>
      <a href="list.htm?status=${status!}&pageNo=${page.totalPage}&pageSize=${page.pageSize}" aria-label="最后一页">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
  <#if status??&&(status==888 || status==0 || status==1 || status==-2)>
	    <button type="button" onclick="showList()" class="btn btn-primary" style="float:left;margin-top: 15px;">查看入库任务日志</button>
  </#if>
</nav>
<#else>
    <#if status??&&(status==888 || status==0 || status==1 || status==-2)>
	    <button type="button" onclick="showList()" class="btn btn-primary" style="float:left;margin-top: 15px;">查看入库任务日志</button>
	</#if>
</#if>
				
			             </div>
			         </div>
 </div>			         

<script src="../static_bootstrap/js/ie10-viewport-bug-workaround.js"></script>

<form id="showValues" action="tableValues.htm" method="post">
<input type="hidden" name="pageSize" id="pageSize" value="2"/>
<input type="hidden" name="uid" id="uid" value=""/>
<input type="hidden" name="tableNameAlias" id="tableNameAlias" value=""/>
</form>

<form id="findByCatalog" action="list.htm" method="post">
<input type="hidden" name="catalog" id="catalog" value=""/>
</form>

<form id="showTableInfo" action="tableInfo.htm" method="post">
<input type="hidden" name="uid" id="showTableInfo_uid" value=""/>
</form>

<script>

function findByCatalog(catalog) {     	    
	$("#catalog").val(catalog);
	$("#findByCatalog").submit();

}

function showTableInfo(uid) {     	    
	$("#showTableInfo_uid").val(uid);
	$("#showTableInfo").submit();

}

function showValues(uid,tableNameAlias) {     	    
	$("#uid").val(uid);
	$("#tableNameAlias").val(tableNameAlias);
	$("#showValues").submit();

}

</script>
    
    
</BODY>
</HTML>